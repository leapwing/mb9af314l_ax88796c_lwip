<!DOCTYPE html>
<html>
    <head>
        <title>Welcome to Fujitsu FM3</title>
		<link rel="stylesheet" href="style.css">
		<meta charset="utf-8">
    </head>
<body>

<script type="text/javascript" src="json2.js">
</script>
<script>
<!--
var xhr;
var xhrs;
var msie;
if (window.ActiveXObject) {
	xhr = new ActiveXObject("Microsoft.XMLHTTP");
	xhrs = new ActiveXObject("Microsoft.XMLHTTP");
	msie = true;
    }
	else {
	xhr = new XMLHttpRequest();
	xhrs = new XMLHttpRequest();
	msie = false;
	}

function requestData() {
	xhr.open('get', 'ajax_data.json');
	if (msie == true) {
        xhr.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"); 
    }
    xhr.onreadystatechange = processResponse;
    xhr.send(null);
}

function processResponse() {
    if (xhr.readyState == 4  && xhr.status == 200){
		myJO = JSON.parse(xhr.responseText); // my JSON Object
		var ax = (myJO.a%4096) / 4095*100;
		var qx = (myJO.q%100)/99*100;
		var lx = myJO.l / 99*100;
        document.getElementById('av').innerHTML = myJO.a;
		document.getElementById("adc").style.width = ax + '%';
        document.getElementById('qv').innerHTML = myJO.q;
		document.getElementById("qprc").style.width = qx + '%';
		document.getElementById('ledval').value=myJO.l;
		document.getElementById("led").style.width = lx + '%';
		}
    }

var x = 100;
function changeWidth() {
    x += 10;
    document.getElementById("adc").style.width = x + 'px';
}

function sendLEDData() {
    xhrs.open('get', 'input.cgi?ledval='+document.getElementById('ledval').value);
    xhrs.send();  
}

function incLED() {
	if (document.getElementById('ledval').value < 99)
    document.getElementById('ledval').value++;
	sendLEDData();
}

function decLED() {
	if (document.getElementById('ledval').value > 0)
		document.getElementById('ledval').value--;
	sendLEDData();
}   
window.setInterval(requestData, 1000);
-->
</script>
<noscript>
<h1>Please activate JavaScript for this site to work properly!</h1>
<p>
You will get real-time data updates and a better data presentation.
</p>
</noscript>

<h1>Welcome to FUJITSU FM3</h1>
<p>

This Webserver runs on an MB9BFD18T microcontroller, a member of Fujitsu's FM3 family,<br>powered by the <a href="http://savannah.nongnu.org/projects/lwip/">LwIP (lightweight IP)</a> TCP/IP stack.
</p>
<p>
Here you see a website which refreshes its data from the microcontroller in background without the need to reload the whole page.
You can find a <a href="simple.shtml">simple website without the need for a JavaScript-capable webbrowser here</a>
</p>

<div class="container">
<h2>Controls on SK-FM3-176PMC-ETHERNET</h2>
<p>Please turn the knobs on the starterkit. Also, press the pushbuttons to increase and decrease the value shown on the seven-segment displays.
</p>
<div class="label">RP1: ADC (Analog Digital Converter):<span id="av">&nbsp;</span></div><div class="barbg"><div id="adc" class="bar">&nbsp;</div></div><br>
<div class="label">SW4: QPRC (Quadrature Position/Revolution Counter):<span id="qv">&nbsp;</span></div><div class="barbg"><div id="qprc" class="bar">&nbsp;</div></div><br>
<div class="label">Pushbuttons SW2 and SW3, associated with these two buttons:
<input type="button" value ="-" name="decbtn" onClick="javascript:decLED()">
<input type="text" name="ledval" size="2" maxlength="2" id="ledval" value="78" onfocus="this.blur()" readonly="readonly" >
<input type="button" value ="+" name="incbtn" onClick="javascript:incLED()">
</div><div class="barbg"><div id="led" class="bar">&nbsp;</div></div><br>
</div>


<p>

For more information, updates, code examples and documentation, please visit our website at <a href="http://mcu.emea.fujitsu.com/">http://mcu.emea.fujitsu.com/</a> or contact <a href="mailto:mcu_ticket.FSEU@de.fujitsu.com">mcu_ticket.FSEU@de.fujitsu.com</a>.
</p>
<p>
Below, you see a 100kb large picture of the SK-FM3-176PMC-ETHERNET evaluation board to demonstrate transfer speed.
<img alt="big picture" src="bigpicture.jpg?1"><!--?1 to circumvent browser cache to enable performance measurements-->
</p>
</body>
</html>  

